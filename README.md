# C3Chat - AI Chat with Multi-Model Support

🏆 **T3 Chat Cloneathon Submission**

A modern AI chat application with support for multiple AI providers, real-time sync via Convex, and persistent chat URLs.

**[🚀 Try Demo](https://clone3chat.vercel.app)** 
## ✨ Features

### Core Features
- ✅ **Multi-Model Chat**: Google Gemini 2.0, OpenAI GPT-4o, OpenRouter (200+ models)
- ✅ **Real-Time Sync**: Instant message updates via Convex reactive queries
- ✅ **Redis Caching**: Viewport-based message loading with Redis for performance
- ✅ **Persistent URLs**: Each chat has a unique shareable URL
- ✅ **Authentication**: Secure auth with password and anonymous login

### AI Features
- ✅ **Image Generation**: Imagen 3, Gemini Flash Image Gen, DALL-E 3
- ✅ **Video Generation**: Veo 2 models via Google AI
- ✅ **Web Search**: Real-time search with `/search` command
- ✅ **File Uploads**: Images analyzed by multimodal models
- ✅ **Voice Input**: Browser speech-to-text

### Chat Features
- ✅ **Message Editing**: Edit user messages, regenerate AI responses
- ✅ **Conversation Branching**: Fork chats at any point
- ✅ **Projects**: Organize chats into workspaces
- ✅ **Slash Commands**: `/image`, `/video`, `/search`, `/research`, `/help`
- ✅ **Export**: Download chats as markdown or JSON

### Technical Features
- ⚡ **Instant Updates**: Messages appear immediately, no loading delays
- 🔐 **Encrypted Storage**: API keys encrypted with persistent localStorage key
- 📱 **Cross-Tab Sync**: Real-time synchronization via Redis and localStorage
- 🚀 **Optimistic UI**: Zero-latency message sending with automatic rollback
- 🎯 **Message Deduplication**: Prevents duplicate rendering and React warnings
- 🧹 **Automatic Cleanup**: Orphaned attachments removed via daily cron job
- 💾 **Smart Caching**: Redis viewport caching with 83%+ hit rate
- 🔄 **Streaming Optimization**: Efficient buffer management prevents memory leaks

## 🚀 Quick Start

### Try Online
Visit [clone3chat.vercel.app](https://clone3chat.vercel.app) - no installation required!

### Run Locally
```bash
# Clone the repository
git clone https://github.com/yourusername/c3chat.git
cd c3chat

# Install dependencies
bun install

# Copy environment variables (if exists)
cp .env.example .env.local

# Start development (runs both frontend and backend)
bun run dev
```

## 🛠️ Tech Stack

- **Frontend**: React 19, TypeScript, Tailwind CSS v4, Vite 6
- **Backend**: Convex (reactive database + serverless functions)
- **AI Providers**: Google Gemini, OpenAI, OpenRouter
- **Storage**: Convex file storage for attachments
- **Package Manager**: Bun
- **Deployment**: Vercel + Convex

## 📸 Screenshots

Screenshots coming soon!

## 🏗️ Architecture

```
c3chat/
├── src/              # React 19 application
│   ├── components/   # UI components
│   ├── lib/          # Sync engine, Redis cache, AI providers
│   └── pages/        # Route pages
├── convex/           # Backend functions
│   ├── threads.ts    # Thread CRUD operations
│   ├── messages.ts   # Message streaming & updates
│   ├── ai.ts         # AI provider integrations
│   └── schema.ts     # Database schema
└── public/           # Static assets
```

### Sync Engine Architecture
- **Convex First**: Server is source of truth, real-time reactive queries
- **Redis Cache**: Background caching for performance, non-blocking
- **Viewport Loading**: Load only visible messages (O(1) memory usage)
- **Deduplication**: Automatic duplicate prevention at multiple levels
- **Optimistic Updates**: Instant UI feedback with rollback on failure

## 🔑 Environment Variables

```bash
# Required (auto-generated by Convex)
VITE_CONVEX_URL=your-convex-url

# API keys are configured in-app via Settings UI
# No environment variables needed for API keys
```

## 🎯 Performance

- **Message Display**: Instant from Convex queries (<50ms)
- **Redis Operations**: 2 syncs per message (optimized from 7+)
- **Viewport Loading**: 50 messages per load, O(1) memory usage
- **Cache Hit Rate**: 83%+ for repeated operations
- **Streaming Buffer**: Auto-cleanup prevents memory leaks
- **Thread Switching**: Single viewport load, no UI flash
- **Deduplication**: Zero duplicate renders or React warnings

## 🏆 Competition Submission

This project was built for the T3 Chat Cloneathon:

- **Unique Features**: Persistent URL routing for chats, cross-tab sync, voice input
- **Code Quality**: TypeScript throughout, Convex for type-safe backend
- **User Experience**: Clean interface with encrypted API key storage
- **Open Source**: MIT License

## 🙏 Acknowledgments

Built with [Convex](https://convex.dev), [Tailwind CSS](https://tailwindcss.com), and love for the T3 community.

## 📄 License

MIT License - see [LICENSE](LICENSE) for details.